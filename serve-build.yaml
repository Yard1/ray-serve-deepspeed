# This file was generated using the `serve build` command on Ray v3.0.0.dev0.

import_path: deepspeed_app:entrypoint

runtime_env: 
  env_vars:
    APPLICATION_ARGS: |-
      bucket_uri: "s3://large-dl-models-mirror/models--stabilityai--stablelm-tuned-alpha-7b/main/"
      name: "stabilityai/stablelm-tuned-alpha-7b"
      hf_home: "/nvme/cache"
      batch_size: 2
      use_kernel: true
    HF_HOME: "/nvme/cache"

host: 0.0.0.0

port: 8000

deployments:

- name: DeepspeedApp
  route_prefix: /
  max_concurrent_queries: 2
  autoscaling_config:
    min_replicas: 2
    initial_replicas: 2
    max_replicas: 32
    target_num_ongoing_requests_per_replica: 1.0
    metrics_interval_s: 10.0
    look_back_period_s: 30.0
    smoothing_factor: 1.0
    downscale_delay_s: 60.0
    upscale_delay_s: 10.0
  ray_actor_options:
    resources:
      worker_node: 0.5